{"version":3,"sources":["serviceWorker.js","client.js","components/Map.jsx","hooks.js","components/Marker.jsx","components/MarkerTypes.jsx","components/Reaction.jsx","pages/Cat.jsx","components/Location.jsx","components/Stepper.jsx","components/Button.jsx","components/PhotoPicker.jsx","pages/Upload.jsx","pages/Application.jsx","index.jsx"],"names":["Boolean","window","location","hostname","match","API_ENDPOINT","process","createClient","url","MapContext","createContext","useMap","useContext","usePrevious","value","ref","useRef","useEffect","current","defaultStepActionTypes","next","back","reset","useStepper","actionTypes","initialStep","useReducer","state","type","Error","activeStep","dispatch","stepForward","stepBackward","resetStepper","createNewPhoto","photoSrc","catId","a","fetch","then","res","blob","body","FormData","append","JSON","stringify","photoUpload","method","json","data","createPhoto","useCreateCat","useMutation","addCatState","addCatMutation","useState","results","setResults","createCatMutation","useCallback","lat","lng","src","cat","createCat","id","photo","photoId","useLocation","position","setPosition","navigator","geolocation","getCurrentPosition","coords","latitude","longitude","useUser","localStorage","getItem","e","userId","setUserId","newUserId","Math","random","toString","slice","setItem","Marker","latlng","draggable","icon","onChange","noop","isActive","onActive","onClick","map","marker","markerLayer","L","on","addLayer","removeLayer","cleanup","wasActive","wasDraggable","dragging","enable","disable","iconFactory","className","divIcon","html","iconSize","DefaultMarkerProxy","styled","div","ActiveMarkerProxy","NewMarkerProxy","markerClassNames","default","componentStyle","componentId","active","new","MarkerStyles","createGlobalStyle","blue","defaultMarkerIcon","DefaultMarker","props","newMarkerIcon","NewMarker","addReactionMutation","removeReactionMutation","Reaction","reactions","useParams","size","count","setCount","some","hasClicked","toggleClicked","addReaction","removeReaction","Chip","color","label","LAT_LNG_PRECISION","baseUrl","fallback","Emoji","span","typography","getCatById","deleteCatById","reactionTypes","like","laugh","scream","Cat","params","history","isOpen","toggleOpen","isDeleteDialogOpen","toggleDeleteDialog","deleteSuccess","deleteFailure","error","deleteCat","useQuery","query","variables","fetching","search","URLSearchParams","push","setTimeout","roundLatlng","partialRight","round","filterReactionsByType","filter","get","onClose","insertedAt","parseISO","Drawer","open","anchor","BackdropProps","invisible","SlideProps","onExited","Box","display","minHeight","alignItems","justifyContent","CircularProgress","CardMedia","image","height","flexDirection","p","width","mb","Fragment","formatDistance","Date","addSuffix","join","Fab","fontSize","mr","pb","has","Button","variant","startIcon","Dialog","DialogTitle","DialogContent","Typography","gutterBottom","DialogActions","key","CurrentPositionMarker","circleIcon","CurrentPositionMarkerStyles","Location","currentPosition","flyTo","Step","children","Stepper","attrs","ActionContainer","theme","css","spacing","getImageInformation","file","callback","URL","createObjectURL","Promise","resolve","exif","getData","getAllTags","PhotoPicker","objectUrl","setObjectUrl","revokeObjectURL","component","htmlFor","target","files","rest","style","Preview","orientation","exif2css","Upload","setImage","setCoordinates","isFetching","hideBackdrop","pointerEvents","pt","pr","pl","IconButton","getCenter","getLatLng","Orientation","disabled","StyledMap","base","center","zoom","controlPosition","container","setMap","mapInstance","setView","tileLayer","addTo","zoomControl","data-testid","Provider","createMuiTheme","useNextVariants","palette","ReactDOM","render","CssBaseline","client","result","path","pathname","element","getElement","classList","add","remove","document","getElementById","font","createElement","innerText","appendChild","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.6b6fd85e.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { createClient } from 'urql';\n\nexport const API_ENDPOINT = process.env.REACT_APP_API_ENDPOINT || '/graphql';\n\nexport default createClient({ url: API_ENDPOINT });\n","import React, { createContext, useEffect, useRef, useState } from 'react';\nimport L from 'leaflet';\n\nexport const MapContext = createContext();\n\nexport default function Map({\n  base,\n  center,\n  zoom,\n  controlPosition = 'topleft',\n  children,\n  onClick,\n  className\n}) {\n  const container = useRef(null);\n  const [map, setMap] = useState();\n\n  useEffect(() => {\n    if (!map) {\n      const mapInstance = L.map(container.current).setView(center, zoom);\n      L.tileLayer(base).addTo(mapInstance);\n\n      mapInstance.zoomControl.setPosition(controlPosition);\n\n      setMap(mapInstance);\n    }\n  }, [base, center, controlPosition, map, onClick, zoom]);\n\n  return (\n    <>\n      <div ref={container} className={className} data-testid=\"container\" />\n      <MapContext.Provider value={map} data-testid=\"map-provider\">\n        {children}\n      </MapContext.Provider>\n    </>\n  );\n}\n","import { useCallback, useContext, useEffect, useReducer, useRef, useState } from 'react';\nimport { API_ENDPOINT } from './client';\nimport { MapContext } from './components/Map';\nimport { useMutation } from 'urql';\n\nexport const useMap = () => useContext(MapContext);\n\nexport const useToggle = (initialState = false) => {\n  const [isToggled, setToggle] = useState(initialState);\n  const toggle = () => setToggle(!isToggled);\n\n  return { isToggled, toggle };\n};\n\nexport const usePrevious = value => {\n  const ref = useRef();\n\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n\n  return ref.current;\n};\n\nconst defaultStepActionTypes = {\n  next: 'next',\n  back: 'back',\n  reset: 'reset'\n};\n\nexport const useStepper = (actionTypes = defaultStepActionTypes, initialStep = 0) => {\n  const [activeStep, dispatch] = useReducer((state, { type }) => {\n    switch (type) {\n      case actionTypes.next:\n        return state + 1;\n      case actionTypes.back:\n        return state - 1;\n      case actionTypes.reset:\n        return initialStep;\n      default:\n        throw Error('Unexpected action type');\n    }\n  }, initialStep);\n\n  const stepForward = () => dispatch({ type: actionTypes.next });\n  const stepBackward = () => dispatch({ type: actionTypes.back });\n  const resetStepper = () => dispatch({ type: actionTypes.reset });\n\n  return [activeStep, stepForward, stepBackward, resetStepper];\n};\n\nconst addCat = `\n  mutation ($lat: Float!, $lng: Float!) {\n    createCat(lat: $lat, lng: $lng) {\n      id\n    }\n  }\n`;\n\nconst addPhoto = `\n  mutation ($catId: ID!, $photoUpload: Upload!) {\n    createPhoto(catId: $catId, photoUpload: $photoUpload) {\n      id,\n      cat {\n        id\n      }\n    }\n  }\n`;\n\n// async function that performs a multipart fetch upload\n// i use fetch here rather than urql in order to avoid doing\n// complicated bullshit like writing a bunch of middleware or\n// whatever it is they recommend\nconst createNewPhoto = async (photoSrc, catId) => {\n  if (!photoSrc || !catId) {\n    throw Error('missing one of required arguments: photoSrc, catId');\n  }\n\n  const blob = await fetch(photoSrc).then(res => res.blob());\n  const body = new FormData();\n\n  body.append('query', addPhoto);\n  body.append('variables', JSON.stringify({ catId, photoUpload: 'photo' }));\n  body.append('photo', blob);\n\n  return fetch(API_ENDPOINT, { method: 'post', body })\n    .then(res => res.json())\n    .then(res => res.data.createPhoto);\n};\n\n// create cat hook joins both requests to add a new photo and new cat record\nexport const useCreateCat = () => {\n  const [addCatState, addCatMutation] = useMutation(addCat);\n  const [results, setResults] = useState();\n\n  const createCatMutation = useCallback(\n    async (lat, lng, src) => {\n      try {\n        const cat = await addCatMutation({ lat, lng });\n        const photo = await createNewPhoto(src, cat.data.createCat.id);\n\n        setResults({\n          photoId: photo.id,\n          catId: cat.data.createCat.id\n        });\n      } catch {}\n    },\n    [addCatMutation]\n  );\n\n  return [{ ...addCatState, data: results }, createCatMutation];\n};\n\nexport const useLocation = () => {\n  const [position, setPosition] = useState(null);\n\n  useEffect(() => {\n    navigator.geolocation.getCurrentPosition(({ coords }) => {\n      if (coords) {\n        setPosition([coords.latitude, coords.longitude]);\n      }\n    });\n  }, []);\n\n  return position;\n};\n\nexport const useUser = () => {\n  const [userId, setUserId] = useState(() => {\n    try {\n      const idFromLocalStorage = localStorage.getItem('userId');\n\n      return idFromLocalStorage;\n    } catch (e) {\n      return undefined;\n    }\n  });\n\n  useEffect(() => {\n    if (!userId) {\n      const newUserId = Math.random()\n        .toString(36)\n        .slice(2);\n      localStorage.setItem('userId', newUserId);\n      setUserId(newUserId);\n    }\n  }, [userId]);\n\n  return userId;\n};\n","import { useEffect, useRef } from 'react';\nimport { useMap, usePrevious } from '../hooks';\nimport L from 'leaflet';\nimport { noop } from 'lodash';\n\nexport default function Marker({\n  latlng = null,\n  draggable = false,\n  icon,\n  onChange = noop,\n  isActive = false,\n  onActive = noop,\n  onClick = noop\n}) {\n  const map = useMap();\n  const marker = useRef();\n\n  // initialize the marker\n  useEffect(() => {\n    if (!marker.current) {\n      const markerLayer = L.marker(latlng, {\n        draggable,\n        icon\n      });\n\n      // set event handlers\n      markerLayer.on('dragend', onChange);\n      markerLayer.on('add', onChange);\n      markerLayer.on('click', onClick);\n\n      map.addLayer(markerLayer);\n      marker.current = markerLayer;\n    }\n  });\n\n  useEffect(() => {\n    return () => {\n      map.removeLayer(marker.current);\n    };\n  }, [map]);\n\n  // handle active and non-active state\n  const cleanup = useRef();\n  const wasActive = usePrevious(isActive);\n  useEffect(() => {\n    if (isActive) {\n      // when a marker is made active, store the fn returned by\n      // on active as the \"cleanup\" function to be called later\n      cleanup.current = onActive(marker.current);\n    } else if (wasActive) {\n      // call the assigned cleanup function when a marker is no\n      // longer marked active\n      cleanup.current(marker.current);\n    }\n  }, [isActive, wasActive, onActive]);\n\n  // enable and disable marker dragging\n  const wasDraggable = usePrevious(draggable);\n\n  useEffect(() => {\n    if (marker.current && draggable) {\n      marker.current.dragging.enable();\n    } else if (wasDraggable) {\n      marker.current.dragging.disable();\n    }\n  }, [draggable, wasDraggable]);\n\n  return null;\n}\n","import styled, { createGlobalStyle } from 'styled-components';\nimport L from 'leaflet';\nimport Marker from '../components/Marker';\nimport React from 'react';\nimport blue from '@material-ui/core/colors/blue';\n\nconst iconFactory = className =>\n  L.divIcon({\n    html: `<svg viewBox=\"0 0 1000 1000\"><use xlink:href=\"#marker\" /></svg>`,\n    iconSize: [42, 42],\n    className\n  });\n\nconst DefaultMarkerProxy = styled.div``;\nconst ActiveMarkerProxy = styled.div``;\nconst NewMarkerProxy = styled.div``;\n\nexport const markerClassNames = {\n  default: DefaultMarkerProxy.componentStyle.componentId,\n  active: ActiveMarkerProxy.componentStyle.componentId,\n  new: NewMarkerProxy.componentStyle.componentId\n};\n\nexport const MarkerStyles = createGlobalStyle`\n  ${DefaultMarkerProxy} {\n    fill: ${blue[400]};\n    stroke-width: 0;\n    filter: drop-shadow(1px -2px 2px rgba(0, 0, 0, 0.35))\n  }\n\n  ${ActiveMarkerProxy} {\n    fill: ${blue[800]};\n  }\n\n  ${NewMarkerProxy} {\n    fill: ${blue[400]};\n    fill-opacity: 0.55;\n    stroke: ${blue[800]};\n    stroke-width: 30;\n    stroke-dasharray: 50;\n  }\n`;\n\nconst defaultMarkerIcon = iconFactory(markerClassNames.default);\nexport function DefaultMarker(props) {\n  return <Marker icon={defaultMarkerIcon} {...props} />;\n}\n\nconst newMarkerIcon = iconFactory(markerClassNames.new);\nexport function NewMarker(props) {\n  return <Marker icon={newMarkerIcon} {...props} />;\n}\n","import React, { useState } from 'react';\nimport { size, some } from 'lodash';\nimport Chip from '@material-ui/core/Chip';\nimport { useMutation } from 'urql';\nimport { useParams } from 'react-router-dom';\nimport { useUser } from '../hooks';\n\nconst addReactionMutation = `\n  mutation ($type: String!, $catId: ID!, $userId: ID!) {\n    addReaction(type: $type, catId: $catId, userId: $userId) {\n      id\n      userId\n      cat {\n        reactions {\n          id\n        }\n      }\n    }\n  }\n`;\n\nconst removeReactionMutation = `\n  mutation ($type: String!, $catId: ID!, $userId: ID!) {\n    removeReaction(type: $type, catId: $catId, userId: $userId) {\n      id\n      userId\n      cat {\n        reactions {\n          id\n        }\n      }\n    }\n  }\n`;\n\nexport default function Reaction({ icon, reactions, type }) {\n  const userId = useUser();\n  const { catId } = useParams();\n\n  const [count, setCount] = useState(size(reactions));\n  const [hasClicked, toggleClicked] = useState(some(reactions, { userId }));\n  const [, /*addReactionState*/ addReaction] = useMutation(addReactionMutation);\n  const [, /*removeReactionState*/ removeReaction] = useMutation(removeReactionMutation);\n\n  const clickHandler = () => {\n    if (hasClicked) {\n      setCount(count - 1);\n      removeReaction({ type, userId, catId });\n    } else {\n      setCount(count + 1);\n      addReaction({ type, userId, catId });\n    }\n\n    toggleClicked(!hasClicked);\n  };\n\n  return (\n    <Chip\n      color={hasClicked ? 'primary' : 'default'}\n      icon={icon}\n      label={count}\n      onClick={clickHandler}\n    />\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport { filter, get, partialRight, round } from 'lodash';\nimport { useMutation, useQuery } from 'urql';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport Calendar from '@material-ui/icons/CalendarToday';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Chip from '@material-ui/core/Chip';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport CloseIcon from '@material-ui/icons/Close';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Drawer from '@material-ui/core/Drawer';\nimport Fab from '@material-ui/core/Fab';\nimport Location from '@material-ui/icons/LocationOn';\nimport Reaction from '../components/Reaction';\nimport Typography from '@material-ui/core/Typography';\nimport formatDistance from 'date-fns/formatDistance';\nimport parseISO from 'date-fns/parseISO';\nimport styled from 'styled-components';\nimport { typography } from '@material-ui/system';\nimport { useLocation } from 'react-router-dom';\n\nconst LAT_LNG_PRECISION = 4;\nconst baseUrl = `https://s3.amazonaws.com/staging.bodegacatmap.com`;\nconst fallback =\n  'https://www.nydailynews.com/resizer/wplZhfxcnWBj_QiKfxf5xMl7-Rc=/1200x0/top/arc-anglerfish-arc2-prod-tronc.s3.amazonaws.com/public/LWTDMJZF5FBNPFUT7I2ORVWUNM.jpg';\n\nconst Emoji = styled.span`\n  ${typography}\n\n  text-indent: 3px;\n`;\n\nconst getCatById = `\n  query ($id: ID!) {\n    cat(id: $id) {\n      id\n      lat\n      lng\n      insertedAt\n      reactions {\n        id\n        type\n        userId\n      }\n      photos {\n        id\n      }\n    }\n  }\n`;\n\nconst deleteCatById = `\n  mutation ($id: ID!, $key: String!) {\n    deleteCat(id: $id, key: $key) {\n      id\n    }\n  }\n`;\n\nconst reactionTypes = {\n  like: 'like',\n  laugh: 'laugh',\n  scream: 'scream'\n};\n\nfunction Cat({\n  match: {\n    params: { catId }\n  },\n  history\n}) {\n  const [isOpen, toggleOpen] = useState(false);\n  const [isDeleteDialogOpen, toggleDeleteDialog] = useState(false);\n  const [{ data: deleteSuccess, error: deleteFailure }, deleteCat] = useMutation(deleteCatById);\n  const [{ data, fetching }] = useQuery({\n    query: getCatById,\n    variables: { id: catId }\n  });\n\n  const { search } = useLocation();\n  const query = new URLSearchParams(search);\n\n  useEffect(() => {\n    if (deleteSuccess) {\n      toggleDeleteDialog(false);\n      history.push('/');\n    }\n  }, [deleteSuccess, history]);\n\n  useEffect(() => {\n    if (data) {\n      toggleOpen(true);\n    } else if (fetching) {\n      setTimeout(() => {\n        toggleOpen(true);\n      }, 150);\n    }\n  }, [data, fetching]);\n\n  const roundLatlng = partialRight(round, LAT_LNG_PRECISION);\n  const filterReactionsByType = type => filter(get(data, 'cat.reactions'), { type });\n\n  const onClose = () => toggleOpen(false);\n  const onExited = () => history.push('/');\n\n  const insertedAt = parseISO(`${get(data, 'cat.insertedAt')} UTC`);\n  const photo = get(data, 'cat.photos.0.id');\n\n  return (\n    <div>\n      <Drawer\n        open={isOpen}\n        anchor=\"bottom\"\n        BackdropProps={{ invisible: true }}\n        onClose={onClose}\n        SlideProps={{ onExited }}>\n        {fetching && (\n          <Box display=\"flex\" minHeight=\"300px\" alignItems=\"center\" justifyContent=\"center\">\n            <CircularProgress />\n          </Box>\n        )}\n        {data && (\n          <CardMedia image={photo ? `${baseUrl}/${photo}-full.jpg` : fallback}>\n            <Box\n              height=\"304px\"\n              display=\"flex\"\n              flexDirection=\"column\"\n              justifyContent=\"space-between\"\n              p={1}>\n              <Box display=\"flex\" justifyContent=\"space-between\" width=\"100%\">\n                <Box display=\"flex\" flexDirection=\"column\" alignItems=\"flex-start\">\n                  <Box mb={1}>\n                    <Chip\n                      size=\"small\"\n                      icon={<Calendar />}\n                      label={\n                        <React.Fragment>\n                          Added {formatDistance(insertedAt, new Date(), { addSuffix: true })}\n                        </React.Fragment>\n                      }\n                    />\n                  </Box>\n                  <Chip\n                    icon={<Location />}\n                    size=\"small\"\n                    label={[roundLatlng(data.cat.lat), roundLatlng(data.cat.lng)].join(', ')}\n                  />\n                </Box>\n                <Fab size=\"small\" onClick={onClose}>\n                  <CloseIcon fontSize=\"small\" />\n                </Fab>\n              </Box>\n              <Box display=\"flex\" justifyContent=\"center\">\n                {/* eslint-disable jsx-a11y/accessible-emoji */}\n                <Box mr={1}>\n                  <Reaction\n                    icon={<Emoji fontSize={20}>ðŸ˜»</Emoji>}\n                    type={reactionTypes.like}\n                    reactions={filterReactionsByType(reactionTypes.like)}\n                  />\n                </Box>\n                <Box mr={1}>\n                  <Reaction\n                    icon={<Emoji fontSize={20}>ðŸ˜¹</Emoji>}\n                    type={reactionTypes.laugh}\n                    reactions={filterReactionsByType(reactionTypes.laugh)}\n                  />\n                </Box>\n                <Reaction\n                  icon={<Emoji fontSize={20}>ðŸ™€</Emoji>}\n                  type={reactionTypes.scream}\n                  reactions={filterReactionsByType(reactionTypes.scream)}\n                />\n              </Box>\n            </Box>\n            <Box display=\"flex\" justifyContent=\"center\" pb={1}>\n              {query.has('admin') && (\n                <React.Fragment>\n                  <Button\n                    variant=\"contained\"\n                    color=\"secondary\"\n                    onClick={() => toggleDeleteDialog(true)}\n                    startIcon={<DeleteIcon />}>\n                    Delete\n                  </Button>\n                  <Dialog open={isDeleteDialogOpen} onClose={() => toggleDeleteDialog(false)}>\n                    <DialogTitle>Delete this cat?</DialogTitle>\n                    <DialogContent>\n                      <Typography gutterBottom>\n                        Are you sure you want to delete this cat?\n                      </Typography>\n                      {deleteFailure && (\n                        <Typography color=\"error\">\n                          There was a problem with your request.\n                        </Typography>\n                      )}\n                    </DialogContent>\n                    <DialogActions>\n                      <Button variant=\"outlined\" onClick={() => toggleDeleteDialog(false)}>\n                        Cancel\n                      </Button>\n                      <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={() => {\n                          const key = query.get('admin');\n                          deleteCat({ id: catId, key });\n                        }}>\n                        Confirm\n                      </Button>\n                    </DialogActions>\n                  </Dialog>\n                </React.Fragment>\n              )}\n            </Box>\n          </CardMedia>\n        )}\n      </Drawer>\n    </div>\n  );\n}\n\nexport default Cat;\n","import React, { useEffect } from 'react';\nimport styled, { createGlobalStyle } from 'styled-components';\nimport { useLocation, useMap } from '../hooks';\nimport L from 'leaflet';\nimport Marker from '../components/Marker';\nimport blue from '@material-ui/core/colors/blue';\n\nconst CurrentPositionMarker = styled(Marker)``;\n\nconst circleIcon = L.divIcon({\n  className: CurrentPositionMarker.componentStyle.componentId,\n  iconSize: [14, 14]\n});\n\nconst CurrentPositionMarkerStyles = createGlobalStyle`\n  ${CurrentPositionMarker} {\n    border-radius: 50%;\n    background-image: linear-gradient(${blue[300]}, ${blue[600]});\n    box-shadow: 2px 1px 4px 0 rgba(0, 0, 0, 0.65);\n  }\n`;\n\nexport default function Location() {\n  const currentPosition = useLocation();\n  const map = useMap();\n\n  useEffect(() => {\n    if (map && currentPosition) {\n      map.flyTo(currentPosition);\n    }\n  }, [currentPosition, map]);\n\n  return (\n    <>\n      <CurrentPositionMarkerStyles />\n      {currentPosition && <CurrentPositionMarker latlng={currentPosition} icon={circleIcon} />}\n    </>\n  );\n}\n","import { useStepper } from '../hooks';\n\nexport const Step = ({ isActive, children }) => (isActive ? children : null);\n\nexport default function Stepper({ children }) {\n  const [activeStep, stepForward, stepBackward, resetStepper] = useStepper();\n\n  return children(activeStep, stepForward, stepBackward, resetStepper);\n}\n","import Button from '@material-ui/core/Button';\nimport styled from 'styled-components';\n\nexport default styled(Button).attrs({\n  color: 'default',\n  variant: 'contained',\n  size: 'small'\n})``;\n","import React, { useEffect, useState } from 'react';\nimport styled, { css } from 'styled-components';\nimport Button from './Button';\nimport exif from 'exif-js';\n\nconst ActionContainer = styled.div`\n  ${({ theme }) => css`\n    display: flex;\n    margin-top: ${({ theme }) => theme.spacing(1)}px;\n\n    ${Button} {\n      margin-right: ${theme.spacing(1)}px;\n    }\n  `}\n`;\n\nconst getImageInformation = async (file, callback) => {\n  const src = URL.createObjectURL(file);\n\n  try {\n    const data = await new Promise(resolve => exif.getData(file, () => resolve(exif.getAllTags(file))));\n\n    callback({ src, ...data });\n  } catch (e) {\n    // exif-js often doesn't throw errors when something happens so try to catch something here?\n    throw new Error(`failed to get exif data because: ${e}`);\n  }\n};\n\nexport default function PhotoPicker({ onChange }) {\n  const [objectUrl, setObjectUrl] = useState(null);\n\n  useEffect(() => {\n    return () => URL.revokeObjectURL(objectUrl);\n  }, [objectUrl]);\n\n  return (\n    <ActionContainer>\n      <Button color=\"primary\" component=\"label\" htmlFor=\"photo-select\">\n        Select a photo\n      </Button>\n      <input\n        type=\"file\"\n        id=\"photo-select\"\n        onChange={({ target }) => {\n          getImageInformation(target.files[0], (objectUrl, ...rest) => {\n            setObjectUrl(objectUrl);\n            onChange(objectUrl, ...rest);\n          });\n        }}\n        style={{ display: 'none' }}\n      />\n    </ActionContainer>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport Stepper, { Step } from '../components/Stepper';\nimport styled, { css } from 'styled-components';\nimport { useCreateCat, useMap } from '../hooks';\nimport Box from '@material-ui/core/Box';\nimport Button from '../components/Button';\nimport Close from '@material-ui/icons/Close';\nimport Drawer from '@material-ui/core/Drawer';\nimport IconButton from '@material-ui/core/IconButton';\nimport { NewMarker } from '../components/MarkerTypes';\nimport PhotoPicker from '../components/PhotoPicker';\nimport Typography from '@material-ui/core/Typography';\nimport exif2css from 'exif2css';\n\nconst ActionContainer = styled.div`\n  ${({ theme }) => css`\n    display: flex;\n    margin-top: ${({ theme }) => theme.spacing(1)}px;\n\n    ${Button} {\n      margin-right: ${theme.spacing(1)}px;\n    }\n  `}\n`;\n\nconst Preview = styled.div.attrs({\n  children: <div />\n})`\n  ${({ theme, orientation, image }) => css`\n    width: 100%;\n    height: ${theme.spacing(26)}px;\n    position: relative;\n    overflow: hidden;\n    margin: ${theme.spacing(1)}px 0;\n\n    > div {\n      position: absolute;\n      left: 0;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      background-image: url(${image});\n      background-position: center center;\n      background-size: cover;\n      ${exif2css(orientation)}\n    }\n  `}\n`;\n\nexport default function Upload({ history }) {\n  const map = useMap();\n\n  const [isOpen, toggleOpen] = useState(false);\n\n  // create state for\n  const [{ objectUrl, orientation }, setImage] = useState({\n    objectUrl: null,\n    orientation: null\n  });\n\n  const [{ lat, lng }, setCoordinates] = useState({ lat: null, lng: null });\n  const [{ fetching: isFetching, data, error }, createCat] = useCreateCat();\n\n  useEffect(() => {\n    toggleOpen(true);\n  }, []);\n\n  useEffect(() => {\n    if (data) {\n      history.push(`/cats/${data.catId}`);\n    }\n  }, [data, history]);\n\n  const onClose = () => toggleOpen(false);\n  const onExited = () => history.push('/');\n\n  return (\n    <Drawer\n      open={isOpen}\n      anchor=\"bottom\"\n      hideBackdrop\n      onClose={onClose}\n      SlideProps={{ onExited }}\n      style={{ pointerEvents: 'none' }}>\n      <Box pt={1} pr={2} pl={2} pb={2} style={{ pointerEvents: 'auto' }}>\n        <Box display=\"flex\" justifyContent=\"space-between\" mb={1}>\n          <Typography variant=\"h6\">Add a cat</Typography>\n          <IconButton size=\"small\" onClick={onClose}>\n            <Close fontSize=\"small\" />\n          </IconButton>\n        </Box>\n        <Stepper>\n          {(activeStep, stepForward, stepBackward, resetStepper) => (\n            <React.Fragment>\n              {/* Adds a marker to the map that is draggable when the user is on the first step */}\n              {map && (\n                <NewMarker\n                  map={map}\n                  latlng={map.getCenter()}\n                  draggable={activeStep === 0}\n                  onChange={({ target }) => {\n                    const latlng = target.getLatLng();\n                    setCoordinates(latlng);\n                  }}\n                />\n              )}\n\n              {/* Step 1: User drags the marker on the map to the desired location */}\n              <Step isActive={activeStep === 0}>\n                <Typography>\n                  Drag the marker to the location of your bodega cat on the map\n                </Typography>\n              </Step>\n\n              {/* Step 2: User selects a photo they'd like to upload with the new record */}\n              <Step isActive={activeStep === 1}>\n                <Typography>Take a photo or select one from your library</Typography>\n                <PhotoPicker\n                  onChange={exif => {\n                    setImage({\n                      objectUrl: exif.src,\n                      orientation: exif.Orientation\n                    });\n                    stepForward();\n                  }}\n                />\n              </Step>\n\n              {/* Step 3: User confirms their selections and submits */}\n              <Step isActive={activeStep === 2}>\n                <Preview orientation={orientation} image={objectUrl} />\n                {error && (\n                  <Typography variant=\"body1\" color=\"error\">\n                    {error}\n                  </Typography>\n                )}\n                <Button\n                  color=\"primary\"\n                  disabled={isFetching}\n                  onClick={() => createCat(lat, lng, objectUrl)}>\n                  Looks good!\n                </Button>\n              </Step>\n\n              {/* Navigation controls to step through the form */}\n              <ActionContainer>\n                <Button onClick={stepBackward} disabled={activeStep === 0}>\n                  Back\n                </Button>\n                {activeStep === 2 ? (\n                  <Button\n                    onClick={() => {\n                      resetStepper();\n                      setImage({ src: null, orientation: null });\n                      setCoordinates({ lat: null, lng: null });\n                    }}>\n                    Reset\n                  </Button>\n                ) : (\n                  <Button onClick={stepForward} disabled={activeStep === 1 && !objectUrl}>\n                    Next\n                  </Button>\n                )}\n              </ActionContainer>\n            </React.Fragment>\n          )}\n        </Stepper>\n      </Box>\n    </Drawer>\n  );\n}\n","import { DefaultMarker, MarkerStyles, markerClassNames } from '../components/MarkerTypes';\nimport { HashRouter, Route, Switch } from 'react-router-dom';\nimport { get, map } from 'lodash';\nimport AddIcon from '@material-ui/icons/AddAPhotoRounded';\nimport Box from '@material-ui/core/Box';\nimport Cat from '../pages/Cat';\nimport Fab from '@material-ui/core/Fab';\nimport Location from '../components/Location';\nimport Map from '../components/Map';\nimport React from 'react';\nimport Upload from './Upload';\nimport styled from 'styled-components';\nimport { useQuery } from 'urql';\n\nconst StyledMap = styled(Map).attrs({\n  base: 'https://{s}.basemaps.cartocdn.com/rastertiles/light_all/{z}/{x}/{y}.png',\n  center: [40.7128, -74.006],\n  zoom: 13\n})`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 0;\n`;\n\nexport default function Application() {\n  const [result] = useQuery({\n    query: `{ cats { id, lat, lng } }`\n  });\n\n  return (\n    <HashRouter>\n      <Route>\n        {({ history, location }) => (\n          <Box\n            width=\"100%\"\n            height=\"100%\"\n            display=\"flex\"\n            position=\"absolute\"\n            justifyContent=\"center\"\n            alignItems=\"flex-end\"\n            p={1}>\n            <StyledMap>\n              <MarkerStyles />\n              <Location />\n              <Fab variant=\"extended\" color=\"primary\" onClick={() => history.push('/upload')}>\n                <Box mr={1}>\n                  <AddIcon />\n                </Box>\n                Add a cat\n              </Fab>\n              <Switch>\n                <Route path=\"/cats/:catId\" component={Cat} />\n                <Route path=\"/upload\" component={Upload} />\n              </Switch>\n              {map(get(result, 'data.cats'), marker => (\n                <DefaultMarker\n                  key={marker.id}\n                  latlng={[marker.lat, marker.lng]}\n                  isActive={location.pathname === `/cats/${marker.id}`}\n                  onActive={marker => {\n                    const element = marker.getElement();\n\n                    element.classList.add(markerClassNames.active);\n\n                    return () => {\n                      element.classList.remove(markerClassNames.active);\n                    };\n                  }}\n                  onClick={() => {\n                    history.push(`/cats/${marker.id}`);\n                  }}\n                />\n              ))}\n            </StyledMap>\n          </Box>\n        )}\n      </Route>\n    </HashRouter>\n  );\n}\n","import * as serviceWorker from './serviceWorker';\nimport Application from './pages/Application';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { Provider as GraphQLProvider } from 'urql';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ThemeProvider } from 'styled-components';\nimport client from './client';\nimport { createMuiTheme } from '@material-ui/core/styles';\n\nconst theme = createMuiTheme({\n  typography: {\n    useNextVariants: true\n  },\n  palette: {\n    type: 'light'\n  }\n});\n\nReactDOM.render(\n  <React.Fragment>\n    <CssBaseline />\n    <ThemeProvider theme={theme}>\n      <GraphQLProvider value={client}>\n        <Application />\n      </GraphQLProvider>\n    </ThemeProvider>\n  </React.Fragment>,\n  document.getElementById('root')\n);\n\n// Don't prevent the browser from hanging when loading Google fonts\nconst font = document.createElement('style');\nfont.innerText = \"@import url('https://fonts.googleapis.com/css?family=Roboto&display=swap')\";\ndocument.body.appendChild(font);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}